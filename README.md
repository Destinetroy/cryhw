# cryhw
密码学大作业
基本信息表
作品题目：单表代换辅助工具
作品内容摘要：运用Python语言，可以实现在图形用户界面（GUI）输入明文并进行单表代换加密，与输入密文并进行单表代换解密；以及通过唯密文攻击方式辅助解密的实现，具体包括频率分析、上下文破译，用户可选择通过上述两种方式分别获得软件推测的密钥，然后指定部分密钥字设置进行解密，通过比对解密结果合理推测并改变指定密钥字设置，以期获得正确解密结果。
关键词（五个）：单表代换加密、解密、频率分析、上下文破译、密钥字设置
团队成员（按在作品中的贡献大小排序）：
序号	姓名	学号
1	张馨月	PB23331864

1.作品功能与性能说明
功能1：完成单表代换加密和解密
输入待加密的一段任意英文后，可通过指定部分密钥字对其进行单表代换加密。此时，对所得密文进行解密可获得原输入的明文。同理，输入待解密的一段任意英文后，可通过指定部分密钥字对其进行单表代换加密。
功能2：辅助破译单表代换密文（唯密文攻击）
输入待解密的一段任意英文后，可选择按下频率分析或者上下文分析的按钮获得建议密钥字。
。频率分析：根据一般英文的统计分布规律给出破译建议
。上下文分析：根据上下文给出破译建议（包括但不限于字母连接、字典等）
使用者根据建议指定部分密钥字，软件更新破译结果并进一步给出建议，反复迭代直至完成破译。

2.设计与实现方案
代码实现：使用Python语言，并在代码头部导入必要的依赖项。
接下来，我将分步骤设计和实现该工具，包括加密解密模块、频率分析模块、上下文分析模块以及用户交互界面。
步骤一：设计加密与解密模块描述：
实现单表代换密码的核心功能，即加密和解密。单表代换密码通过将明文中的每个字母替换为另一个字母来工作，通常需要一个密钥表来进行映射。决定：编写两个函数，encrypt 和 decrypt，分别用于加密和解密文本。需要一个密钥字典来定义字母的映射关系。
步骤二：实现频率分析辅助破译描述：
利用英语字母的频率分布规律，对密文进行频率分析，以推测可能的字母映射。这有助于在唯密文攻击中提供破译建议。决定：编写一个函数 frequency_analysis，统计密文中各字母的出现频率，并与标准英语频率进行比较，提出可能的映射建议。
步骤三：添加上下文分析辅助破译描述：
除了频率分析，还可以利用上下文信息（如常见单词、字母组合等）来辅助破译。例如，识别常见的英文单词或字母连接模式，以提高破译准确性。决定：编写一个函数 context_analysis，结合字典库和字母连接规则，分析密文并提出更具体的破译建议。
步骤四：构建用户交互界面描述：
为了提高用户体验，需要设计一个友好的界面，允许用户输入密文，查看分析和建议，并根据建议指定部分密钥字以迭代破译过程。决定：使用Python的tkinter库创建图形用户界面（GUI），包括输入框、按钮、显示区域等组件，确保界面直观易用。
步骤五：整合各模块并实现迭代破译描述：
将加密解密、频率分析、上下文分析以及用户交互界面整合在一起，实现用户可以逐步指定密钥字，软件根据新信息更新破译结果并进一步提供建议，直到完成破译。决定：编写主程序逻辑，处理用户输入和模块之间的数据传递，确保迭代过程顺畅无误。
2.1 实现原理
（硬件框图、软件流程、相关描述等）
依赖项导入：
tkinter库用于创建GUI。
collections模块中的defaultdict可用于频率分析时统计字母频率。
string模块提供了ascii_uppercase，用于生成大写字母表。
enchant可以在字典中查找可能的单词，根据单词的结构来确定更合理的映射关系。在后续使用enchant.Dict("en_US") 创建了一个英语字典对象，然后使用 d.suggest(segment) 方法获取与 segment 相近的建议单词，以此来辅助进行字母映射的推测。
类定义：
SubstitutionCipherTool类包含了工具的主要逻辑和界面组件。
初始化方法：
__init__方法初始化主窗口，并调用create_widgets方法创建界面组件。
界面组件创建方法：
create_widgets方法创建了密文输入框、明文显示框、加密按钮、解密按钮、频率分析按钮、上下文分析按钮、密钥指定输入框和应用密钥按钮。
主要模块方法实现：
实现encrypt和decrypt方法，用于对文本进行加密和解密操作。
实现frequency_analysis方法，根据字母频率为密钥赋值。频率分析是单表代换密码破解的常用方法，可以帮助用户快速推测密钥。
实现context_analysis 方法，利用英文单词常见结尾，通过安装 pyenchant 库来创建字典，进而通过上下文来判断密钥。
在各个方法中添加错误处理，当用户输入无效信息时给出相应提示：在每个方法中添加try-except块，捕获可能的异常并显示错误信息。为提高程序的健壮性，避免因用户输入错误而导致程序崩溃。
在apply_key方法中，在应用密钥时，验证用户输入的密钥格式是否正确。确保用户输入的密钥格式符合要求，避免程序崩溃。
update_reverse_key_dict()用于更新反向密钥字典。在单表代换密码的处理中，正向密钥字典是将明文字母映射到密文字母，而反向密钥字典则是将密文字母映射回明文字母。通过调用这个方法，可以确保反向密钥字典与当前的正向密钥字典保持同步，这样在进行解密操作时就能更高效地查找对应的明文字母。
2.2 参考文献
2.3 运行结果 


2.4 技术指标
密文框为输入框，明文框为显示框。在输入任意一串英文后在指定密钥框中依次输入密钥字得到密钥，点击“加密”，可在显示框得到密文。清除输入后，再次输入任意一串英文，此时密钥不变，点击“解密”，可在显示框得到明文。
结束此次运行后，重新运行该程序，在输入足够长的英文句段后，点击“频率分析”，跳出密钥窗口，再点击“上下文分析”，跳出另一不同的密钥窗口，再点击“解密”，即于显示框中获得明文。此时综合两个密钥，猜测确定部分密钥字，并输入指定密钥，译得明文作为下一次解密的密文，重复上述操作，可得完整明文。
3.系统测试与结果

3.1 测试方案
一．在指定密钥框中依次输入密钥字，点击“应用密钥”，测试是否设置密钥成功。
二.在输入任意一串英文后在指定密钥框中依次输入密钥字得到密钥，点击“加密”，测试是否能在显示框得到密文。清除输入后，再次输入任意一串英文，此时密钥不变，点击“解密”，测试是否能在显示框得到明文。
三.结束此次运行后，重新运行该程序，在输入足够长的英文句段后，点击“频率分析”，测试是否能跳出密钥窗口，再点击“上下文分析”，测试是否能跳出另一不同的密钥窗口，再点击“解密”，测试是否能于显示框中获得明文。此时综合两个密钥，猜测确定部分密钥字，并输入指定密钥，译得明文作为下一次解密的密文，重复上述操作，可得完整明文。

3.2 功能测试
按照测试方案进行，依次检测设置指定密钥字，设置指定密钥，加密，解密，唯密文攻击 （频率分析，上下文分析）等功能。
3.3 性能测试
记录测试方案步骤一中设置的密钥，步骤二中的两次明密文，与一中记录的密钥对比，确定是否出错；
记录步骤三中的频率分析所得密钥，计算密文的英文字母出现频率，于标准英语字母频率表做对比，然后进行迭代，观察是否能得到完全译出的明文，以及得到完全译出的明文的过程是否有效且有效率。
3.4 测试数据与结果
功能测试：
设置指定密钥：

成功

加密：
成功

解密：

成功

唯密文攻击 （频率分析，上下文分析）
频率分析
成功

上下文分析



成功
性能测试：
由功能测试知，测试方案步骤二中的两次明密文，与步骤一中设置的密钥密钥对比，确定并未出错；
记录步骤三中的频率分析所得密钥，计算密文的英文字母出现频率，将其与其对应的明文字母标准英语字母频率表做对比，发现从高到低的顺序大致可以对的上。
进行迭代，我认为得到完全译出的明文的过程是有效的，但会花费大量时间与精力。

4.应用前景
 1. 信息安全教育
教学工具：该工具可以作为信息安全课程的辅助教学工具，帮助学生理解单表代换加密和解密的基本原理。通过实际操作，学生可以更好地掌握加密技术的基本概念和方法。
实验平台：在信息安全实验室中，该工具可以用于演示和实验，帮助学生进行加密算法的实践和研究。
易用性：由于该工具具有友好、直观、易用的界面，即使是非专业用户也可以轻松上手，进行加密和解密操作
迭代破译：通过逐步更新破译结果和建议，用户可以更容易地理解和掌握破译过程，提高破译效率。

 2. 密码学研究
算法验证：研究人员可以使用该工具来验证和测试新的单表代换算法，评估其安全性和效率。
攻击方法研究：该工具提供的唯密文攻击功能可以帮助研究人员研究和分析各种密码攻击方法，提高他们对密码学的理解。

数据保护
个人数据加密：普通用户可以使用该工具对敏感信息进行加密，保护个人隐私和数据安全。
小型企业：对于小型企业或初创公司，该工具可以提供一种简单而有效的方式来保护商业机密和客户数据。

 4. 娱乐和游戏
谜题和挑战：该工具可以用于创建加密谜题和挑战，增加游戏的趣味性和互动性。例如，在逃脱室游戏或在线益智游戏中，玩家可以使用该工具来解决加密难题。

 5. 法律和取证
数字取证：在数字取证过程中，该工具可以帮助调查人员破解加密信息，获取关键证据。
法律合规：在某些情况下，企业可能需要遵守特定的数据保护法规，该工具可以帮助他们实现数据的加密和解密，确保合规性。

 6. 跨学科应用
语言学研究：该工具可以用于语言学研究中的文本分析和处理，帮助研究人员理解不同语言的字符分布和模式。
人工智能：在AI领域，该工具可以用于训练机器学习模型，特别是那些涉及自然语言处理和模式识别的任务。
5.结论
提供了较为有效的频率分析辅助与较为丰富的上下文分析辅助，python的tkinter,enchant等库降低了程序的复杂度，是本程序相对来说比较突出的亮点。但上下文分析部分还是有较为不足的地方，本系统的上下文分析是基于密文的 常见结尾 ，所以无法分析没有断句的密文，在单词中的识别范围也十分受局限；此外，字典中有叠字母的特殊单词其实在比较中可以更为突出地体现出来，但受限于技术力与时间，以上缺点没有得到较好的解决，是未来的改进方向之一。


